<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ±ºæ¸ˆãƒšãƒ¼ã‚¸</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    /* ã‚¹ãƒãƒ›å‘ã‘ã®ãƒªã‚»ãƒƒãƒˆã¨ãƒ™ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ« */
    body { 
      font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
      padding: 16px; 
      margin: 0;
      background-color: #f8f9fa;
      color: #333;
      line-height: 1.6;
    }

    h2 {
      text-align: center;
      font-size: 1.4rem;
      margin: 20px 0;
      color: #2c3e50;
    }

    /* ã‚«ãƒ¼ãƒ‰ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ã‚¹ãƒãƒ›ã§è¦‹ã‚„ã™ã */
    .card { 
      background: white;
      border: none;
      border-radius: 12px; 
      padding: 20px; 
      margin-bottom: 20px; 
      box-shadow: 0 4px 12px rgba(0,0,0,0.05); /* å°‘ã—é«˜ç´šæ„Ÿã®ã‚ã‚‹å½± */
    }

    .card h3 {
      margin-top: 0;
      font-size: 1.2rem;
      color: #007bff;
    }

    .price {
      font-size: 1.5rem;
      font-weight: bold;
      margin: 10px 0;
    }

    .description {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 15px;
    }

    /* æŒ‡ã§æŠ¼ã—ã‚„ã™ã„ãƒœã‚¿ãƒ³ã‚µã‚¤ã‚º */
    button { 
      width: 100%; /* ã‚¹ãƒãƒ›ã§ã¯æ¨ªå¹…ã„ã£ã±ã„ã®ãƒœã‚¿ãƒ³ãŒæŠ¼ã—ã‚„ã™ã„ */
      padding: 14px; 
      font-size: 18px; 
      font-weight: bold;
      background-color: #06C755; /* LINEã‚«ãƒ©ãƒ¼ */
      color: white; 
      border: none; 
      border-radius: 8px; 
      cursor: pointer;
      transition: background-color 0.2s;
    }

    button:active {
      background-color: #05a346;
      transform: scale(0.98); /* æŠ¼ã—ãŸæ™‚ã®æ„Ÿè§¦ */
    }
  </style>
</head>
<body>

<h2>æœˆè© ã‚¢ã‚ªã‚¤ã®ã‚·ãƒ§ãƒƒãƒ— ğŸŒ™</h2>

<div class="card">
  <h3>ğŸ”¹ å˜å“å•†å“</h3>
  <p class="description">å ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆ1å›ï¼‰</p>
  <p class="price">500å††</p>
  <button onclick="buySingle()">è³¼å…¥ã™ã‚‹</button>
</div>

<div class="card">
  <h3>ğŸ”¹ ã‚µãƒ–ã‚¹ã‚¯å•†å“</h3>
  <p class="description">æ¯æ—¥ã®å ã„ï¼‹å®‰å¦ç¢ºèª</p>
  <p class="price">980å†† <small>/ æœˆ</small></p>
  <button onclick="buySubscription()">ç™»éŒ²ã™ã‚‹</button>
</div>

<script>
// --- è¨­å®šé …ç›® ---
const LIFF_ID = "2008865871-ceuoxSzX"; 
const STRIPE_SINGLE_URL = "https://buy.stripe.com/test_5kQ28rgd16nVaD93sf1Nu04"; 
const STRIPE_SUBSCRIPTION_URL = "https://buy.stripe.com/test_9B63cv0e3fYvbHd2ob1Nu03"; 

async function initLIFF() {
  try {
    await liff.init({ liffId: LIFF_ID });
    if (!liff.isLoggedIn()) {
      liff.login();
    }
  } catch (err) {
    console.error("LIFFã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ", err);
  }
}

async function getLineUserId() {
  const profile = await liff.getProfile();
  return profile.userId;
}

async function buySingle() {
  const lineUserId = await getLineUserId();
  const finalUrl = `${STRIPE_SINGLE_URL}?client_reference_id=${encodeURIComponent(lineUserId)}`;
  window.location.href = finalUrl;
}

async function buySubscription() {
  const lineUserId = await getLineUserId();
  const finalUrl = `${STRIPE_SUBSCRIPTION_URL}?client_reference_id=${encodeURIComponent(lineUserId)}`;
  window.location.href = finalUrl;
}

initLIFF();
</script>

</body>
</html>
