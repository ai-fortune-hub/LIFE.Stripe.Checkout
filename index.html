<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>æ±ºæ¸ˆãƒšãƒ¼ã‚¸</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .card { border: 1px solid #ddd; padding: 15px; margin-bottom: 15px; }
    button { padding: 10px 15px; font-size: 16px; }
  </style>
</head>
<body>

<h2>æœˆè© ã‚¢ã‚ªã‚¤ã®ã‚·ãƒ§ãƒƒãƒ— ğŸŒ™</h2>

<div class="card">
  <h3>ğŸ”¹ å˜å“å•†å“</h3>
  <p>å ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆ1å›ï¼‰</p>
  <p>ä¾¡æ ¼ï¼š500å††</p>
  <button onclick="buySingle()">å˜å“ã‚’è³¼å…¥</button>
</div>

<div class="card">
  <h3>ğŸ”¹ ã‚µãƒ–ã‚¹ã‚¯å•†å“</h3>
  <p>æ¯æ—¥ã®å ã„ï¼‹å®‰å¦ç¢ºèª</p>
  <p>ä¾¡æ ¼ï¼šæœˆé¡ 980å††</p>
  <button onclick="buySubscription()">ã‚µãƒ–ã‚¹ã‚¯ã«ç™»éŒ²</button>
</div>

<script>
const LIFF_ID = "2008865871-ceuoxSzX";

async function initLIFF() {
  await liff.init({ liffId: LIFF_ID });

  if (!liff.isLoggedIn()) {
    liff.login();
  }
}

async function getLineUserId() {
  const profile = await liff.getProfile();
  return profile.userId; // â† ã“ã‚ŒãŒæœ€é‡è¦
}

async function buySingle() {
  const lineUserId = await getLineUserId();

  const stripeUrl =
    "https://checkout.stripe.com/c/pay/your_single_checkout_link" +
    "?client_reference_id=" + encodeURIComponent(lineUserId) +
    "&metadata[line_user_id]=" + encodeURIComponent(lineUserId) +
    "&metadata[purchase_type]=single" +
    "&metadata[quantity]=1";

  window.location.href = stripeUrl;
}

async function buySubscription() {
  const lineUserId = await getLineUserId();

  const stripeUrl =
    "https://checkout.stripe.com/c/pay/your_subscription_checkout_link" +
    "?client_reference_id=" + encodeURIComponent(lineUserId) +
    "&metadata[line_user_id]=" + encodeURIComponent(lineUserId) +
    "&metadata[purchase_type]=subscription";

  window.location.href = stripeUrl;
}

initLIFF();
</script>

</body>
</html>
